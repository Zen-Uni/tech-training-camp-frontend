{"version":3,"sources":["store/actionConstant.js","store/action.js","static/avatar.jpg","modules/Edit/style.js","modules/Edit/EditLeft.jsx","modules/Edit/EditRight.jsx","modules/Edit/ShareButton.jsx","util/tool-bar.js","util/token.js","service.js","util/fetch.js","modules/Edit/index.jsx","modules/LoginAndRegister/style.js","modules/LoginAndRegister/Login.jsx","modules/LoginAndRegister/Register.jsx","modules/LoginAndRegister/index.jsx","modules/Home/style.js","modules/Home/index.jsx","modules/Article/style.js","modules/Article/Left.jsx","util/postImg.js","modules/Article/Right.jsx","modules/Article/index.jsx","modules/NotFound/index.jsx","modules/Cooperation/style.js","modules/Cooperation/Left.js","modules/Cooperation/Right.js","modules/Admin/index.jsx","routes.js","modules/Cooperation/index.js","App.js","util/markdown-particle.js","store/reducer.js","store/index.js","index.js"],"names":["EDIT_UPDATE","USER_CONFIG","editUpdateAction","text","type","updateUserConfig","username","console","log","avatar","EditWrapper","styled","div","EditHeaderWrapper","HeaderInputWrapper","HeaderConfigWrapper","ShareButtonWrapper","EditToolWrapper","EditContentWrapper","ContentLeftWrapper","ContentRightWrapper","ContentFooter","EditContent","EditRender","connect","dispatch","updateEdit","action","props","editFocus","editContent","contentEl","useRef","contentEditable","className","onKeyUp","e","current","innerText","keyCode","preventDefault","range","view","getSelection","getRangeAt","offset","startOffset","span","document","createElement","innerHTML","newrange","createRange","setStart","startContainer","setEnd","collapse","insertNode","removeAllRanges","addRange","onKeyDown","ref","id","state","content","preview","renderEl","useEffect","ShareButton","share","handleShare","message","success","onClick","Tool","this","heading","bind","em","quote","strong","code","codeBlock","link","pic","selection","window","endOffset","html","handleSite","sel","deleteContents","el","node","lastNode","frag","createDocumentFragment","firstChild","appendChild","cloneRange","setStartAfter","handleAdd","toolBarConfig","icon","fn","site","storeToken","token","localStorage","setItem","configReq","getItem","axios","interceptors","request","use","config","headers","Authorization","rootPath","root","method","path","data","Promise","resolve","reject","get","then","res","post","login","a","captcha","register","checkToken","postArticle","payload","getArticle","getDetails","upDateArticle","getAvatar","upLoadImg","User","update","history","useHistory","warning","msg","replace","url","querySelector","style","backgroundImage","fetchData","useState","setEditFocus","setPreview","areaStyle","setAreaStyle","setEditContent","tool","setTool","setShare","titleEl","handleUpDateEdit","input","getElementById","handlePostArticle","title","value","placeholder","map","item","onMouseDown","SignWrappper","loginLayout","width","position","left","top","transform","loginButtonLayout","textAlign","handleLogin","handleChange","onFinish","values","error","name","initialValues","remember","Item","rules","required","prefix","UserOutlined","LockOutlined","htmlType","display","margin","Form","useForm","form","getCaptcha","email","getFieldValue","MailOutlined","label","extra","gutter","noStyle","storeUsername","setLogin","handleChangeComponents","Container","ArticleBox","renderContent","upLoadData","useParams","setTitle","setContent","handleCooperation","dangerouslySetInnerHTML","__html","LeftWrapper","LeftButton","RightWrapper","RightContainer","RightAvatar","RightContent","RightItem","Left","slide","auth","setAuth","removeItem","location","href","handlePostImg","files","target","formData","FormData","append","Right","list","setList","htmlFor","onChange","index","_id","storeUser","setSlide","NotFound","setUsername","Admin","routes","exact","component","Article","Edit","LoginAndRegister","Home","external","setHistory","setCurrent","flag","ws","WebSocket","onopen","send","onmessage","JSON","parse","arr","stringify","push","onclose","handleWebsocket","App","renderRoutes","Particle","isHeading","isQuote","isHr","isCode","isUnOrderList","isOrderList","isCodeWord","isImage","isStrong","isLink","isEm","lines","split","tokens","htmlContent","tokensToHTML","cur","judgeCycle","line","test","count","temp","slice","str","nextLine","length","parseInline","str1","str2","join","defaultState","reducer","newState","renderValue","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render"],"mappings":"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","file":"static/js/main.8c3f072a.chunk.js","sourcesContent":["/**\r\n * @description action 类型常量\r\n * @author Uni\r\n */\r\n\r\nexport const EDIT_UPDATE = 'edit_update'\r\n\r\nexport const USER_CONFIG = 'user_config'\r\n\r\nexport const GET_TEXT = 'get_text'","// import action type constant\r\nimport {\r\n    EDIT_UPDATE,\r\n    USER_CONFIG,\r\n} from './actionConstant'\r\n\r\nexport const editUpdateAction = text => {\r\n    return {\r\n        type: EDIT_UPDATE,\r\n        text,\r\n    }\r\n}\r\n\r\nexport const updateUserConfig = username => {\r\n    return {\r\n        type: USER_CONFIG,\r\n        username\r\n    }\r\n}\r\n\r\n","export default __webpack_public_path__ + \"static/media/avatar.10f819e4.jpg\";","/**\r\n * @description 编辑页面样式\r\n * @author Uni\r\n */\r\n\r\nimport styled from 'styled-components'\r\nimport avatar from '../../static/avatar.jpg'\r\nconsole.log(avatar)\r\nexport const EditWrapper = styled.div`\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    /* background-color: black; */\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n    min-width: 1000px;\r\n`\r\n// Header 组件样式\r\nexport const EditHeaderWrapper = styled.div`\r\n    position: relative;\r\n    height: 60px;\r\n    width: 100%;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n`\r\n\r\nexport const HeaderInputWrapper = styled.div`\r\n    height: 50px;\r\n    width: 470px;\r\n    /* background-color: yellow; */\r\n    position: absolute;\r\n    left: 50px;\r\n    /* border-bottom: 2px solid #ccc; */\r\n\r\n    & input {\r\n        position: relative;\r\n        height: 100%;\r\n        width: 100%;\r\n        border: none;\r\n        outline: none;\r\n        font-size: 30px;\r\n        &::placeholder {\r\n            color: #ccc;\r\n        }\r\n    }\r\n`\r\nexport const HeaderConfigWrapper = styled.div`\r\n    height: 50px;\r\n    width: 470px;\r\n    position: absolute;\r\n    right : 50px;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    & .back-button {\r\n        position: absolute;\r\n        right: 150px;\r\n        height: 40px;\r\n        border-radius: 5px;\r\n        margin: 0px 20px;\r\n    }\r\n\r\n    & .post-button {\r\n        position: absolute;\r\n        height: 40px;\r\n        border-radius: 5px;\r\n        margin: 0px 10px;\r\n        right: 50px;\r\n    }\r\n\r\n    & .avatar {\r\n        position: absolute;\r\n        right: 0px;\r\n        height: 40px;\r\n        width: 40px;\r\n        border-radius: 20px;\r\n        background-position: center center;\r\n        background-repeat: none;\r\n        background-image: url(${avatar});\r\n        background-size: cover;\r\n    }\r\n`\r\n\r\nexport const ShareButtonWrapper = styled.div`\r\n    position: absolute;\r\n    right: 270px;\r\n    height: 40px;\r\n    width: 150px;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n\r\n    & .button-label {\r\n        font-weight: 600;\r\n        margin: 0px 10px;\r\n    }\r\n\r\n    & .button-background {\r\n        position: relative;\r\n        height: 25px;\r\n        width: 50px;\r\n        border-radius: 12.5px;\r\n        border: 1px solid #ccc;\r\n        \r\n        display: flex;\r\n        align-items: center;\r\n        cursor: pointer;\r\n        transition: all .4s ease;\r\n    }\r\n\r\n    & .button-background_unshare {\r\n        background-color: white;\r\n        box-shadow: 0px 0px 2px rgba(0, 0, 0, .7);\r\n    }\r\n\r\n    & .button-background_share {\r\n        background-color: #FFA119;\r\n        box-shadow: 0px 0px 1px rgba(0, 0, 0, .7);\r\n    }\r\n\r\n    & .button-ball {\r\n        position: absolute;\r\n        height: 28px;\r\n        width: 28px;\r\n        border: 1px solid #ccc;\r\n        box-shadow: 3px 0px 3px rgba(0, 0, 0, .1);\r\n        border-radius: 14px;\r\n        background-color: white;\r\n        transition: all .4s ease;\r\n    }\r\n\r\n    & .button-ball_unshare {\r\n        left: -2px;   \r\n    }\r\n\r\n    & .button-ball_share {\r\n        left: 27px;   \r\n    }\r\n`\r\n\r\n\r\n\r\n\r\n// 快捷工具栏组件\r\nexport const EditToolWrapper = styled.div`\r\n    position: relative;\r\n    height: 40px;\r\n    width: 100%;\r\n    background-color: #f8f8f8;\r\n    display: flex;\r\n    align-items: center;\r\n    border-bottom: 1px solid #ccc;\r\n    & .iconfont {\r\n        margin: 0px 20px;\r\n        cursor: pointer;\r\n    }\r\n`\r\n\r\nexport const EditContentWrapper = styled.div`\r\n    position: absolute;\r\n    top: 100px;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    background: #ccc;\r\n`\r\n\r\n// 左侧编辑区容器\r\nexport const ContentLeftWrapper = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    width: 50%;\r\n    background-color: #f8f8f8;\r\n    float: left;\r\n    overflow: hidden;\r\n    transition: all .4s ease;\r\n    border-right: 2px solid #ccc;\r\n    &.handle_focus {\r\n        width: 100% !important;\r\n    }\r\n\r\n    &.handle_preview {\r\n        width: 0%;\r\n    }\r\n`\r\n\r\n// 右侧内容渲染区容器\r\nexport const ContentRightWrapper = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: white;\r\n    overflow: hidden;\r\n`\r\n\r\n\r\nexport const ContentFooter = styled.div`\r\n    position: absolute;\r\n    height: 30px;\r\n    width: 100%;\r\n    bottom: 0px;\r\n    background-color: white;\r\n    border-top: 1px solid #ddd;\r\n\r\n    /* &.footer-left {\r\n        border-right: 1px solid #ddd;\r\n    }\r\n\r\n    &.footer-right {\r\n        border-left: 1px solid #ddd;\r\n    } */\r\n\r\n    & .footer-button {\r\n        height: 100%;\r\n        width: 80px;\r\n        text-align: center;\r\n        line-height: 30px;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    & .footer-button-left {\r\n        position: absolute;\r\n        right: 10px;\r\n    }\r\n\r\n    & .footer-button-right {\r\n        position: absolute;\r\n        left: 10px;\r\n    }\r\n`\r\n\r\n// markdown edit components style\r\nexport const EditContent = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 30px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    /* background-color: pink; */\r\n    /* overflow-y: scroll; */\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    overflow-x: hidden;\r\n    padding: 10px 20px;\r\n    transition: padding .4s ease;\r\n    &.content-focus {\r\n        padding: 30px 150px;\r\n        /* text-align: center; */\r\n    }\r\n\r\n\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 7px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n        /* scrollbar-arrow-color:red; */\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    /*滚动条里面轨道*/\r\n       \r\n        /* -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2); */\r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n`\r\n\r\n// TODO: 优化，抽离出一个公共的样式组件\r\n// markdown render components style\r\nexport const EditRender = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 30px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    overflow-x: hidden;\r\n    padding: 10px 20px;\r\n    transition: padding .4s ease;\r\n    word-wrap: break-word;\r\n\r\n\r\n    &.content-preview {\r\n        padding: 30px 150px;\r\n        /* text-align: center; */\r\n    }\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 7px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    \r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n\r\n    & blockquote {\r\n        background-color: #f3f3f3;\r\n        border-radius: 5px;\r\n        box-sizing: border-box;\r\n        padding: 20px 0px 15px 30px;\r\n        display: block;\r\n    }\r\n\r\n    & hr {\r\n        width: 100%;\r\n        height: 2px;\r\n        background-color: #f4f4f4;\r\n        border: none;\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    & .code {\r\n        background-color: yellow;\r\n    }\r\n\r\n    & .code-block {\r\n        background-color: rgba(0,0,0,0.8);\r\n        margin: auto;\r\n        width: 80%;\r\n        line-height: 40px;\r\n        padding: 20px 20px 10px 20px;\r\n        border-radius: 5px;\r\n        font-family: \"STHeiti\";\r\n        color: white;\r\n    }\r\n\r\n`\r\n","/**\r\n * @description markdown 编辑区域\r\n * @author Uni\r\n */\r\n\r\nimport React, { useRef } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\n// import action function\r\nimport {\r\n    editUpdateAction,\r\n} from '../../store/action'\r\n\r\n// import components style\r\nimport {\r\n    EditContent,\r\n} from './style'\r\n\r\nfunction EditLeft(props) {\r\n    \r\n    const { editFocus, updateEdit, editContent } = props\r\n\r\n    const contentEl = useRef(null)\r\n\r\n    \r\n\r\n    const handleEdit = e => {\r\n        let text = contentEl.current.innerText\r\n        // console.log(contentEl.current.innerText)\r\n        // console.log(e.keyCode)\r\n        if (e.keyCode === 9) {\r\n            e.preventDefault()\r\n\r\n           \r\n\r\n            // 获取光标的range对象 event.view 是一个window对象\r\n            let range = e.view.getSelection().getRangeAt(0);\r\n            // 光标的偏移位置\r\n            let offset = range.startOffset;\r\n            // 新建一个span元素\r\n            let span = document.createElement('span');\r\n            // 四个 表示四个空格\r\n            span.innerHTML = '&nbsp;&nbsp;&nbsp;';\r\n            // 创建一个新的range对象\r\n            let newrange = document.createRange();\r\n            // 设置新的range的位置，也是插入元素的位置\r\n            newrange.setStart(range.startContainer, offset);\r\n            newrange.setEnd(range.startContainer, offset);\r\n            newrange.collapse(true);\r\n            newrange.insertNode(span);\r\n            // 去掉旧的range对象，用新的range对象替换\r\n            e.view.getSelection().removeAllRanges();\r\n            e.view.getSelection().addRange(range);\r\n            // 将光标的位置向后移动一个偏移量，放到加入的四个空格后面\r\n            range.setStart(span, 1);\r\n            range.setEnd(span, 1);\r\n            console.log(text)\r\n            \r\n        }\r\n        \r\n        // console.log(text.split('\\n'))\r\n        editContent(text)\r\n        updateEdit(text)\r\n    }   \r\n\r\n    const handleBeforeEdit = e => {\r\n        if (e.keyCode === 9) {\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <EditContent contentEditable=\"true\" className={editFocus ? \"content-focus\" : ''} onKeyUp={handleEdit} onKeyDown={handleBeforeEdit}  ref={contentEl} id=\"contentEl\"> \r\n        </EditContent>\r\n    )\r\n}\r\n\r\n// TODO: 通过 redux 存储输入文本\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        updateEdit(text) {\r\n            const action = editUpdateAction(text)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(null, stateToDispatch)(EditLeft)\r\n\r\n// {\r\n//      // TODO: 写一篇技术博客记录一下\r\n//             // 获取光标的range对象 event.view 是一个window对象\r\n//             let range = e.view.getSelection().getRangeAt(0);\r\n//             // 光标的偏移位置\r\n//             let offset = range.startOffset;\r\n//             // 新建一个span元素\r\n//             let span = document.createElement('span');\r\n//             // 四个 表示四个空格\r\n//             span.innerHTML = '&nbsp;&nbsp;&nbsp;';\r\n//             // 创建一个新的range对象\r\n//             let newrange = document.createRange();\r\n//             // 设置新的range的位置，也是插入元素的位置\r\n//             newrange.setStart(range.startContainer, offset);\r\n//             newrange.setEnd(range.startContainer, offset);\r\n//             newrange.collapse(true);\r\n//             newrange.insertNode(span);\r\n//             // 去掉旧的range对象，用新的range对象替换\r\n//             e.view.getSelection().removeAllRanges();\r\n//             e.view.getSelection().addRange(range);\r\n//             // 将光标的位置向后移动一个偏移量，放到加入的四个空格后面\r\n//             range.setStart(span, 1);\r\n//             range.setEnd(span, 1);\r\n//             console.log(text)\r\n// }\r\n\r\n","/**\r\n * @description 右侧 HTML 渲染区域父组件\r\n * @author Uni\r\n */\r\n\r\nimport React, { useEffect, useRef } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\n// import style components\r\nimport {\r\n    EditRender,\r\n} from './style'\r\n\r\nfunction EditRight(props) {\r\n\r\n    const { preview, content } = props\r\n\r\n    const renderEl = useRef(null)\r\n\r\n    useEffect(() => {\r\n        renderEl.current.innerHTML = content === \"\" ? null : content\r\n    })\r\n\r\n    return (\r\n        <EditRender className={preview ? 'content-preview' : ''} ref={renderEl}> \r\n            {/* {\r\n                content === '' \r\n                ? \r\n                null \r\n                :  \r\n                content.map(item => {\r\n                    return <div>{item}</div>\r\n                })\r\n            } */}\r\n        </EditRender>\r\n    )\r\n}\r\n\r\nconst stateToProps = state => {\r\n    return {\r\n        content: state.editContent\r\n    }\r\n}\r\n\r\n\r\nexport default connect(stateToProps, null)(EditRight)","/**\r\n * @description 分享按钮组件\r\n * @author Uni\r\n */\r\n\r\nimport { message } from 'antd'\r\nimport React, { useEffect } from 'react'\r\n\r\nimport { ShareButtonWrapper} from './style'\r\n\r\nfunction ShareButton(props) {\r\n\r\n    const { share, handleShare } = props\r\n\r\n    useEffect(() => {\r\n        if (share) {\r\n            message.success('文章共享开启', 1)\r\n        } else {\r\n            message.success('文章共享关闭', 1)\r\n        }\r\n    }, [share])\r\n\r\n    return (\r\n        <ShareButtonWrapper>\r\n            <div className=\"button-label\">共享文章:</div>\r\n            <div className={\"button-background \" + (share ? \"button-background_share\" : \"button-background_unshare\")} onClick={handleShare}>\r\n                <div className={\"button-ball \" + (share ? \"button-ball_share\" : \"button-ball_unshare\")}></div>\r\n            </div>\r\n        </ShareButtonWrapper>\r\n    )\r\n}\r\n\r\nexport default ShareButton","/**\r\n * @description 快捷工具库封装\r\n * @author Uni\r\n */\r\n\r\n\r\nclass Tool {\r\n    constructor(text) {\r\n        this.text = text\r\n        this.heading = this.heading.bind(this)\r\n        this.em = this.em.bind(this)\r\n        this.quote = this.quote.bind(this)\r\n        this.strong = this.strong.bind(this)\r\n        this.code = this.code.bind(this)\r\n        this.codeBlock = this.codeBlock.bind(this)\r\n        this.link = this.link.bind(this)\r\n        this.pic = this.pic.bind(this)\r\n    }\r\n\r\n    handleSite(e) {\r\n\r\n        e.preventDefault()\r\n\r\n        const selection = window.getSelection()\r\n        // console.log(selection.getRangeAt(0))\r\n        const range = selection.getRangeAt(0)\r\n        console.log(range.startOffset)\r\n        console.log(range.endOffset)\r\n\r\n        return {range, selection}\r\n    }\r\n\r\n    handleAdd(e, html) {\r\n        let {range, selection: sel} = this.handleSite(e)\r\n        range.deleteContents();\r\n        var el = document.createElement(\"div\");\r\n        el.innerHTML = html;\r\n        var frag = document.createDocumentFragment(),\r\n            node, lastNode;\r\n        while ((node = el.firstChild)) {\r\n            lastNode = frag.appendChild(node);\r\n        }\r\n        range.insertNode(frag);\r\n        // Preserve the selection\r\n        if (lastNode) {\r\n            range = range.cloneRange();\r\n            range.setStartAfter(lastNode);\r\n            range.collapse(true);\r\n            sel.removeAllRanges();\r\n            sel.addRange(range);\r\n        }\r\n    }\r\n\r\n    heading(e) {\r\n        const html = \"#&nbsp;\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    em(e) {\r\n        const html = \"*斜体*\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    quote(e) {\r\n        const html = \">&nbsp;\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    strong(e) {\r\n        const html = \"**粗体**\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    code(e) {\r\n        const html = \"`代码`\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    codeBlock(e) {\r\n        const html = \"```<br/>```\"\r\n        this.handleAdd(e, html)\r\n    }\r\n\r\n    link(e) {\r\n        const html = \"[]()\"\r\n        this.handleAdd(e, html)\r\n    } \r\n\r\n    pic(e) {\r\n        const html = \"![]()\"\r\n        this.handleAdd(e, html)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// 渲染信息\r\nconst toolBarConfig = [\r\n    {\r\n        icon: \"icon-header\",\r\n        fn: \"heading\",\r\n    },\r\n    {\r\n        icon: \"icon-qingxie\",\r\n        fn: \"em\"\r\n    },\r\n    {\r\n        icon: \"icon-jiacu\",\r\n        fn: \"strong\"\r\n    },\r\n    {\r\n        icon: \"icon-yinyong\",\r\n        fn: \"quote\"\r\n    },\r\n    {\r\n        icon: \"icon-code\",\r\n        fn: \"code\"\r\n    },\r\n    {\r\n        icon: \"icon-kuohaobrackets\",\r\n        fn: \"codeBlock\"\r\n    },\r\n    {\r\n        icon: \"icon-link-fill\",\r\n        fn: \"link\"\r\n    },\r\n    {\r\n        icon: \"icon-tupian\",\r\n        fn: \"pic\"\r\n    }\r\n]\r\n\r\n\r\nexport {\r\n    Tool,\r\n    toolBarConfig,\r\n}","/**\r\n * @description 前端对 token 的处理\r\n * @author Uni\r\n*/\r\n\r\n\r\nimport axios from 'axios'\r\n\r\n\r\nconst site = \"BYTEDANCE_LCH\"\r\n\r\nexport const storeToken = token => {\r\n    window.localStorage.setItem(site, token)\r\n}\r\n\r\nexport const getToken = () => {\r\n    return window.localStorage.getItem(site)\r\n}\r\n\r\nexport const configReq = () => {\r\n    const token = getToken()\r\n    console.log(token)\r\n    if (token) {\r\n        axios.interceptors.request.use(config => {\r\n            config.headers.Authorization = `Bearer ${token}`\r\n            return config\r\n        })\r\n        \r\n    } \r\n}\r\n\r\nexport const removeToken = () => {\r\n    return window.localStorage.removeItem(site)\r\n}","/**\r\n * @description 网络请求模块\r\n * @author Uni\r\n */\r\n\r\nimport fetch from './util/fetch'\r\n\r\n// const rootPath = 'http://60.205.230.224:4000/api'\r\n\r\nexport const root = \"http://60.205.230.224:4000/\"\r\n\r\nconst rootPath = root + \"api\"\r\n\r\n\r\nconst axios = fetch(rootPath)\r\n\r\nexport async function login(data) {\r\n    const res = await axios('post', '/user/login', data)\r\n    return res\r\n}\r\n\r\nexport async function captcha(data) {\r\n    const res = await axios('post', '/user/captcha', data)\r\n    return res\r\n}\r\n\r\nexport async function register(data) {\r\n    const res = await axios('post', '/user/register', data) \r\n    return res\r\n}\r\n\r\n\r\nexport async function checkToken() {\r\n    const res = await axios('get', '/user/token')\r\n    return res\r\n}\r\n\r\nexport async function postArticle(payload) {\r\n    const res = await axios('post', '/user/post-article', payload)\r\n    return res\r\n}\r\n\r\nexport async function getArticle() {\r\n    const res = await axios('get', '/user/article-list')\r\n    return res\r\n}\r\n\r\nexport async function getDetails(id) {\r\n    const res = await axios('post', '/user/article-detail', {id})\r\n    return res\r\n}\r\n\r\nexport async function upDateArticle(payload) {\r\n    const res = await axios('post', '/user/article-update', payload)\r\n    return res\r\n}\r\n\r\nexport async function getAvatar() {\r\n    const res = await axios('get', '/user/avatar')\r\n    return res\r\n}\r\n\r\n\r\n// 上传图片\r\nexport async function upLoadImg(data) {\r\n    const res = await axios('post', '/img/avatar', data)\r\n    return res\r\n}\r\n\r\n","/**\r\n * @description 对 axios 简单的二次封装\r\n * @author Uni\r\n */\r\n\r\nimport axios from 'axios'\r\n\r\nexport default function fetch(rootPath) {\r\n    return function(method, path, data) {\r\n        return new Promise((resolve, reject) => {\r\n            if (method === 'get') {\r\n                axios.get(rootPath + path)\r\n                .then(res => {\r\n                    resolve(res.data)\r\n                })\r\n            }\r\n\r\n            if (method === 'post') {\r\n                axios.post(rootPath + path, data)\r\n                .then(res => {\r\n                    resolve(res.data)\r\n                })\r\n            }\r\n        })\r\n    }\r\n}","/**\r\n * @description markdown 编辑页面父组件，用于挂载页面布局组件\r\n * @author Uni\r\n */\r\n\r\nimport React, { useEffect, useRef, useState } from 'react'\r\n\r\nimport {\r\n    editUpdateAction,\r\n} from '../../store/action'\r\n\r\n\r\nimport {\r\n    Button, message\r\n} from 'antd'\r\n\r\n// import style components\r\nimport {\r\n    EditWrapper,\r\n    EditHeaderWrapper,\r\n    EditToolWrapper,\r\n    EditContentWrapper,\r\n    ContentLeftWrapper,\r\n    ContentRightWrapper,\r\n    ContentFooter,\r\n    HeaderInputWrapper,\r\n    HeaderConfigWrapper,\r\n} from './style'\r\n\r\n// import subcomponents\r\nimport EditLeft from './EditLeft'\r\nimport EditRight from './EditRight'\r\nimport ShareButton from './ShareButton'\r\n\r\n\r\n// import toolbar config\r\nimport { toolBarConfig, Tool} from '../../util/tool-bar'\r\nimport { connect } from 'react-redux'\r\nimport { configReq } from '../../util/token'\r\nimport { checkToken, getAvatar, postArticle, root } from '../../service'\r\nimport { useHistory } from 'react-router'\r\n\r\n\r\nfunction Edit(props) {\r\n    const history = useHistory()\r\n    useEffect(() => {\r\n        configReq()\r\n\r\n        async function fetchData() {\r\n            const {\r\n                code,\r\n                data,\r\n            } = await checkToken()\r\n            // console.log(code)\r\n            if (code === 1) {\r\n                message.warning(data.msg, 1, () => {\r\n                    history.replace('/')\r\n                })\r\n            } else {\r\n                const res = await getAvatar()\r\n                if (res.data.url !== '')\r\n                    document.querySelector('.avatar').style.backgroundImage = `url(${root + res.data.url})`\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n    }, [])\r\n\r\n    const { update, User } = props\r\n\r\n    const [editFocus, setEditFocus] = useState(false)\r\n    const [preview, setPreview] = useState(false)\r\n    const [areaStyle, setAreaStyle] = useState('')\r\n    const [editContent, setEditContent] = useState('')\r\n    const [tool, setTool] = useState(new Tool(editContent))\r\n    const [share, setShare] = useState(false)\r\n    const titleEl = useRef(null)\r\n\r\n    useEffect(() => {\r\n        if (preview === false && editFocus === false) {\r\n            setAreaStyle('')\r\n        }\r\n\r\n        if (preview === true) {\r\n            setAreaStyle('handle_preview')\r\n        }\r\n\r\n        if (editFocus === true) {\r\n            setAreaStyle('handle_focus')\r\n        }\r\n    }, [preview, editFocus])\r\n\r\n\r\n    const getEditContent = (text) => {\r\n        setEditContent(text)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setTool(new Tool(editContent))\r\n    }, [editContent])\r\n\r\n    const handleUpDateEdit = () => {\r\n        const input = document.getElementById('contentEl')\r\n        update(input.innerHTML)\r\n    }\r\n\r\n    const handleBackArticle = () => {\r\n        history.replace('/')\r\n    }\r\n\r\n    const handleShare = () => {\r\n        setShare((share) => !share)\r\n    }\r\n\r\n\r\n    const handlePostArticle = async () => {\r\n        const title = titleEl.current.value\r\n        const content = document.getElementById('contentEl').innerText\r\n        console.log(content)\r\n        if (!title && !content) {\r\n            return message.warning(\"请填写标题或内容\")\r\n        }\r\n\r\n        const username = User\r\n        const payload = {\r\n            title,\r\n            username, \r\n            content,\r\n            share\r\n        }\r\n        \r\n        const { code, msg, data } = await postArticle(payload)\r\n        if (code === 0) {\r\n            message.success(msg, .5, () => {\r\n                history.replace('/')\r\n            })\r\n        } else {\r\n            message.warning(data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <EditWrapper>\r\n            {/* 顶部组件，挂载文章标题组件、头像组件、发布按钮组件 */}\r\n            <EditHeaderWrapper>\r\n                <HeaderInputWrapper>\r\n                    <input type=\"text\" placeholder=\"输入文章标题\" ref={titleEl}/>\r\n                </HeaderInputWrapper>\r\n                <HeaderConfigWrapper>\r\n                    <ShareButton handleShare={handleShare} share={share}/>\r\n                    <Button className=\"back-button\" onClick={handleBackArticle}>返回主页</Button>\r\n                    <Button type=\"primary\" className=\"post-button\" onClick={handlePostArticle}>发布文章</Button>\r\n                    <div className=\"avatar\"></div>\r\n                </HeaderConfigWrapper>\r\n            </EditHeaderWrapper>\r\n\r\n            {/* markdown 快捷工具栏组件 */}\r\n            <EditToolWrapper>    \r\n               {\r\n                   toolBarConfig.map((item) => {\r\n                       return <div className={\"iconfont \" + item.icon} onMouseDown={tool[item.fn]} onClick={handleUpDateEdit}></div>\r\n                   })\r\n               }\r\n            </EditToolWrapper>\r\n\r\n            {/* markdown 内容区容器 */}\r\n            <EditContentWrapper>\r\n\r\n                {/* 左侧 */}\r\n                <ContentLeftWrapper className={ areaStyle } >\r\n\r\n                    {/* 编辑组件 */}\r\n                    <EditLeft editFocus={editFocus} editContent={getEditContent}/>\r\n\r\n                    <ContentFooter className=\"footer-left\">\r\n                        <div className=\"footer-button footer-button-left\" onClick={() => setEditFocus((editFocus) => !editFocus)}>专注模式</div>\r\n                    </ContentFooter>\r\n                </ContentLeftWrapper>\r\n\r\n                {/* 右侧 */}\r\n                <ContentRightWrapper>\r\n\r\n                    <EditRight preview={preview}/>\r\n\r\n                    <ContentFooter className=\"footer-right\">\r\n                        <div className=\"footer-button footer-button-right\" onClick={() => setPreview((preview) => !preview)}>预览模式</div>\r\n                    </ContentFooter>\r\n                </ContentRightWrapper>\r\n\r\n            </EditContentWrapper>\r\n\r\n        </EditWrapper>\r\n    )\r\n}\r\n\r\n\r\nconst stateToProps = state => {\r\n    return {\r\n        User: state.username\r\n    }\r\n}\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        update(text) {\r\n            const action = editUpdateAction(text)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(stateToProps, stateToDispatch)(Edit)","/**\r\n * @description 登录注册页面样式\r\n * @author Uni\r\n */\r\n\r\nimport styled from 'styled-components'\r\n\r\nexport const SignWrappper = styled.div`\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    background-color: black;\r\n`\r\n\r\n\r\nexport const loginLayout = {\r\n    width: \"400px\",\r\n    position: \"fixed\",\r\n    left: \"50%\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n\r\n}\r\n\r\nexport const loginButtonLayout = {\r\n    textAlign: \"center\"\r\n}","/**\r\n * @description 登录组件\r\n * @author Uni\r\n */\r\n\r\n// TODO: 测试登录注册，优化逻辑\r\n\r\nimport React, {  } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Form, Input, Button, Checkbox, message } from 'antd'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\n// import action\r\nimport {\r\n    updateUserConfig\r\n} from '../../store/action'\r\n\r\n// import style\r\nimport {\r\n    loginLayout,\r\n    loginButtonLayout\r\n} from './style'\r\n\r\n\r\n// import service interface\r\nimport { login } from '../../service'\r\n\r\n\r\n// import util\r\nimport {\r\n    configReq,\r\n    storeToken,\r\n} from '../../util/token'\r\n\r\n\r\nconst Login = (props) => {\r\n\r\n    const { handleChange, handleLogin } = props\r\n\r\n    const history = useHistory()\r\n\r\n    const onFinish = async (values) => {\r\n        const {\r\n            code, \r\n            data,\r\n        } = await login(values)\r\n        \r\n       if (code === 0) {\r\n        //    message.success(msg, 1)\r\n        //    .then(() => {\r\n        //        history.replace('/article')\r\n        //    })\r\n           storeToken(data.token)\r\n           configReq()\r\n           handleLogin(data.username)\r\n           history.replace('/')\r\n       } else {\r\n           message.error(data.msg)\r\n       }\r\n    };\r\n\r\n    return (\r\n        <Form\r\n        name=\"normal_login\"\r\n        className=\"login-form\"\r\n        initialValues={{\r\n            remember: true,\r\n        }}\r\n        onFinish={onFinish}\r\n        style={loginLayout}\r\n        >\r\n        <Form.Item\r\n            name=\"email\"\r\n            rules={[\r\n                {\r\n                    type: \"email\",\r\n                    message: '请输入正确的邮箱格式',\r\n                },\r\n\r\n                {\r\n                    required: true,\r\n                    message: '请输入用户邮箱',\r\n                },\r\n            ]}\r\n        >\r\n            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n            name=\"password\"\r\n            rules={[\r\n            {\r\n                required: true,\r\n                message: '请输入密码',\r\n            },\r\n            ]}\r\n        >\r\n            <Input\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            />\r\n        </Form.Item>\r\n        <Form.Item style={loginButtonLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{display: \"inline-block\", width: \"160px\"}}>\r\n                登录\r\n            </Button>\r\n            <div style={{margin: \"20px 0px\"}} onClick={handleChange}>\r\n                <Link>去注册</Link>\r\n            </div>\r\n        </Form.Item>\r\n        </Form>\r\n    );\r\n};\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        handleLogin(username) {\r\n            const action = updateUserConfig(username)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(null, stateToDispatch)(Login)\r\n\r\n","/**\r\n * @description 注册组件\r\n * @author Uni\r\n */\r\n\r\nimport React from 'react'\r\n\r\nimport { Form, Input, Button, Row, Col, message } from 'antd'\r\nimport { UserOutlined, LockOutlined, MailOutlined } from '@ant-design/icons'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n// import style\r\nimport {\r\n    loginLayout,\r\n    loginButtonLayout\r\n} from './style'\r\n\r\n\r\n// import fetch\r\nimport {\r\n    captcha,\r\n    register\r\n} from '../../service'\r\nimport { connect } from 'react-redux'\r\nimport { configReq, storeToken } from '../../util/token'\r\n\r\nimport {\r\n    updateUserConfig\r\n} from '../../store/action'\r\n\r\n \r\nconst Register = (props) => {\r\n\r\n    const { handleChange, handleLogin } = props\r\n\r\n    const history = useHistory()\r\n\r\n    const [form] = Form.useForm()\r\n\r\n    const onFinish = async(values) => {\r\n        const  { code, data }= await register(values)\r\n        if (code === 0) {\r\n            storeToken(data.token)\r\n            configReq()\r\n            handleLogin(data.username)\r\n            history.replace('/')\r\n        } else {\r\n            message.error(data.msg)\r\n        }\r\n    };\r\n\r\n\r\n    const getCaptcha = async () => {\r\n        const email = form.getFieldValue('email')\r\n        const { code, msg, data } = await captcha({email})\r\n        if (code === 0) {\r\n            message.success(msg)\r\n        } else {\r\n            message.error(data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form\r\n        name=\"normal_login\"\r\n        className=\"login-form\"\r\n        initialValues={{\r\n            remember: true,\r\n        }}\r\n        onFinish={onFinish}\r\n        style={loginLayout}\r\n        form={form}\r\n        >\r\n        <Form.Item\r\n            name=\"username\"\r\n            rules={[\r\n            {\r\n                required: true,\r\n                message: '请输入用户名',\r\n            },\r\n            ]}\r\n        >\r\n            <Input\r\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n            \r\n            placeholder=\"Username\"\r\n            />\r\n        </Form.Item>\r\n        <Form.Item\r\n            name=\"password\"\r\n            rules={[\r\n            {\r\n                required: true,\r\n                message: '请输入密码',\r\n            },\r\n            ]}\r\n        >\r\n            <Input\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            />\r\n        </Form.Item>\r\n        <Form.Item\r\n            name=\"email\"\r\n            rules={[\r\n                {\r\n                    type: \"email\",\r\n                    message: '请输入正确的邮箱格式',\r\n                },\r\n\r\n                {\r\n                    required: true,\r\n                    message: '请输入用户邮箱',\r\n                },\r\n            ]}\r\n        >\r\n            <Input prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\"  />\r\n        </Form.Item>\r\n        <Form.Item label=\"验证码\" extra=\"We must make sure that your are a human.\">\r\n            <Row gutter={8}>\r\n            <Col span={12}>\r\n                <Form.Item\r\n                name=\"captcha\"\r\n                noStyle\r\n                rules={[\r\n                    {\r\n                    required: true,\r\n                    message: 'Please input the captcha you got!',\r\n                    },\r\n                ]}\r\n                >\r\n                <Input/>\r\n                </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n                <Button onClick={getCaptcha}>获取验证码</Button>\r\n            </Col>\r\n            </Row>\r\n        </Form.Item>\r\n        <Form.Item style={loginButtonLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{display: \"inline-block\", width: \"160px\"}}>\r\n            注册\r\n            </Button>\r\n            <div style={{margin: \"20px 0px\"}} onClick={handleChange}>\r\n                <Link>去登陆</Link>\r\n            </div>\r\n        </Form.Item>\r\n        </Form>\r\n    );\r\n};\r\n\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        handleLogin(username) {\r\n            const action = updateUserConfig(username)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(null, stateToDispatch)(Register)\r\n","/**\r\n * @description 文章登录注册页面\r\n * @author Uni\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react'\r\n\r\n// import util\r\nimport {\r\n    configReq,\r\n    storeToken,\r\n} from '../../util/token'\r\n\r\n\r\n\r\n// import style components\r\nimport {\r\n    SignWrappper,\r\n} from './style'\r\n\r\n\r\n// import subcomponents\r\nimport Login from './Login'\r\nimport Register from './Register'\r\nimport { useHistory } from 'react-router'\r\nimport {\r\n    checkToken\r\n} from '../../service'\r\nimport { connect } from 'react-redux'\r\nimport { updateUserConfig } from '../../store/action'\r\nimport { message } from 'antd'\r\n\r\nfunction LoginAndRegister(props) {\r\n\r\n    const { storeUsername } = props\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {        \r\n        configReq()\r\n        \r\n        async function fetchData() {\r\n            const {\r\n                code,\r\n                data,\r\n                msg\r\n            } = await checkToken()\r\n            if (code === 0) {\r\n                storeUsername(data.username)\r\n                history.replace('/')\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n\r\n        return () => {\r\n            message.success('已登录')\r\n        }\r\n    }, [])\r\n\r\n    const [login, setLogin] = useState(true)\r\n\r\n\r\n    const handleChangeComponents = () => {\r\n        setLogin(() => {\r\n            return !login\r\n        })\r\n    }\r\n\r\n    return (\r\n        <SignWrappper>\r\n            {\r\n                login ? <Login handleChange={handleChangeComponents}/> : <Register handleChange={handleChangeComponents}/>\r\n            }\r\n        </SignWrappper>\r\n    )\r\n}\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        storeUsername(username){\r\n            const action = updateUserConfig(username)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(null, stateToDispatch)(LoginAndRegister)","/**\r\n * @description 文章内容页面样式\r\n * @author Uni\r\n */\r\n\r\nimport styled from 'styled-components'\r\n\r\nexport const Container = styled.div`\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    /* background-color: pink; */\r\n    min-width: 1000px;\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 7px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n        /* scrollbar-arrow-color:red; */\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    /*滚动条里面轨道*/\r\n       \r\n        /* -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2); */\r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n\r\n    & .back {\r\n        position:fixed;\r\n        top: 30px;\r\n        left: 50px;\r\n    }\r\n`\r\n\r\nexport const ArticleBox = styled.div`\r\n    position: relative;\r\n    /* height: 100%; */\r\n    width: 70%;\r\n    background-color: white;\r\n    margin: 0px auto;\r\n\r\n    \r\n\r\n    & .title {\r\n        position: relative;\r\n        height: 80px;\r\n        width: 100%;\r\n        text-align: center;\r\n        font-size: 50px;\r\n        color: #6f9fc7;\r\n        margin: 20px 0px 5px 0px;\r\n    }\r\n    \r\n    & .share {\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n    & .content {\r\n        margin: 50px 0px;\r\n\r\n        & blockquote {\r\n            background-color: #f3f3f3;\r\n            border-radius: 5px;\r\n            box-sizing: border-box;\r\n            padding: 20px 0px 15px 30px;\r\n            display: block;\r\n        }\r\n\r\n        & hr {\r\n            width: 100%;\r\n            height: 2px;\r\n            background-color: #f4f4f4;\r\n            border: none;\r\n            margin-top: 20px;\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        & .code {\r\n            background-color: yellow;\r\n        }\r\n\r\n        & .code-block {\r\n            background-color: rgba(0,0,0,0.8);\r\n            margin: auto;\r\n            width: 80%;\r\n            line-height: 40px;\r\n            padding: 20px 20px 10px 20px;\r\n            border-radius: 5px;\r\n            font-family: \"STHeiti\";\r\n            color: white;\r\n        }\r\n    }\r\n`","/**\r\n * @description 文章内容页面\r\n * @author Uni\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useHistory, useParams } from 'react-router'\r\n\r\nimport { checkToken, getDetails } from '../../service'\r\n\r\nimport { Button, message } from 'antd'\r\n\r\nimport {\r\n    Container,\r\n    ArticleBox,\r\n} from './style'\r\n\r\nimport { editUpdateAction } from '../../store/action'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\n\r\nfunction Home(props) {\r\n    const { id } = useParams()\r\n    const { upLoadData, renderContent } = props\r\n    const [title, setTitle] = useState(\"\")\r\n    const [content, setContent] = useState(\"\")\r\n    const [share, setShare] = useState(false)\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const fetchData = async (id) => {\r\n            console.log(id)\r\n            const { code, msg, data } = await getDetails(id)\r\n            if (code === 0) {\r\n                setContent((content) => content = data.content)\r\n                setTitle((title) => title = data.title)\r\n                setShare(data.share)\r\n                upLoadData(data.content)\r\n            } else {\r\n                message.warning(data.msg)\r\n            }\r\n        }\r\n\r\n        fetchData(id)\r\n\r\n        \r\n    }, [])\r\n\r\n    const handleBack = () => {\r\n        history.replace(\"/\")\r\n    }\r\n\r\n    const handleCooperation = async() => {\r\n        const { code } = await checkToken()\r\n        if (code === 1) {\r\n            message.warning(\"尚未登录，不可编辑\")\r\n        }\r\n\r\n        if (code === 0) {\r\n            history.replace('/cooperation/' + id)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Button className=\"back\" type=\"primary\" onClick={handleBack}>返回主页</Button>\r\n            <ArticleBox>\r\n                <div className=\"title\">{title}</div>\r\n                {\r\n                    share ? <div className=\"share\"><Button type=\"primary\" onClick={handleCooperation}>协作编辑</Button></div> : \"\"\r\n                }\r\n                <div className=\"content\" dangerouslySetInnerHTML={{__html:renderContent}}></div>\r\n            </ArticleBox>\r\n        </Container>\r\n    )\r\n}\r\n\r\n\r\nconst stateToProps = state => {\r\n    return {\r\n        renderContent: state.editContent\r\n    }\r\n}\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        upLoadData(text) {\r\n            const action = editUpdateAction(text)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(stateToProps, stateToDispatch)(Home)","/**\r\n * @description 首页样式\r\n * @author Uni\r\n */\r\n\r\nimport styled from 'styled-components'\r\n\r\n\r\nimport avatar from '../../static/avatar.jpg'\r\n\r\nexport const Container = styled.div`\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    overflow: hidden;\r\n`\r\n\r\nexport const LeftWrapper = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: black;\r\n    overflow: hidden;\r\n    float: left;\r\n    transition: all .4s ease;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n\r\n    &.slide_show {\r\n        width: 200px;\r\n    }\r\n\r\n    &.slide_hidden {\r\n        width: 0px;\r\n    }\r\n\r\n    & .login-button {\r\n        background-color: black;\r\n        border: none;\r\n        color: #61dafb;\r\n        font-weight: 600;\r\n    }\r\n    & .login-button:hover{\r\n        background-color: #61dafb;\r\n        color: white;\r\n    }\r\n\r\n    & .edit-button {\r\n        color: #61dafb;\r\n        margin: 20px;\r\n        font-size: 12px;\r\n        cursor: pointer;\r\n        width: 200px;\r\n        text-align: center;\r\n    }\r\n`\r\n\r\nexport const LeftButton = styled.div`\r\n    position: fixed;\r\n    top: 20px;\r\n    left: 30px;\r\n    height: 30px;\r\n    width: 30px;\r\n    background-color: black;\r\n    z-index: 10;\r\n    cursor: pointer;\r\n    box-shadow: 0px 0px 5px rgba(0, 0, 0, .6);\r\n\r\n    &.slide_show .button-line{\r\n        background-color: #61dafb;\r\n    }\r\n\r\n    &.slide_hidden .button-line {\r\n        background-color: white;\r\n    }\r\n\r\n    & .button-line {\r\n        height: 2px; \r\n        width: 20px;\r\n        \r\n        transition: all .4 ease;\r\n        position: absolute;\r\n        left: 5px;\r\n        transition: all .4s ease\r\n    }\r\n\r\n    & #button-top {\r\n        top: 6px;\r\n    }\r\n    & #button-middle {\r\n        top: 14px;\r\n    }\r\n    & #button-bottom {\r\n        top: 22px;\r\n    }\r\n`\r\n\r\nexport const RightWrapper = styled.div`\r\n    height: 100%;\r\n    position: relative;\r\n    overflow: hidden;\r\n    overflow-y: scroll;\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 3px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n        /* scrollbar-arrow-color:red; */\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    /*滚动条里面轨道*/\r\n       \r\n        /* -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2); */\r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n`\r\n\r\n\r\n// 右侧文章展示区域\r\nexport const RightContainer = styled.div`\r\n    height: 100%;\r\n    position: relative;\r\n    margin: 30px auto;\r\n    width: 700px;\r\n    background-color: white;\r\n`\r\n\r\nexport const RightAvatar = styled.div`\r\n    position: relative;\r\n    margin: 40px auto;\r\n    height: 80px;\r\n    width: 80px;\r\n    border-radius: 40px;\r\n    background-image: url(${avatar});\r\n    background-position: center;\r\n    background-size: cover;\r\n    background-repeat: none;\r\n    overflow: hidden;\r\n    border: 1px #f8f8f8 solid;\r\n    box-shadow: 0px 0px 3px rgba(0, 0, 0, .4);\r\n    \r\n    /* 头像阴影层 */\r\n    & input{\r\n        position: absolute;\r\n        height: 100%;\r\n        width: 100%;\r\n        opacity: 0;\r\n        z-index: -1;\r\n    }\r\n\r\n    & .avatar-shadow {\r\n        position: absolute;\r\n        height: 100%;\r\n        width: 100%;\r\n        transition: all .3s ease;  \r\n        cursor: pointer;\r\n    }\r\n\r\n    & .avatar-shadow:hover {\r\n        background-color: rgba(0, 0, 0, .4);\r\n    }\r\n\r\n    & label div {\r\n        position: absolute;\r\n        bottom: 25px;\r\n        color: rgba(255, 255, 255, 0);\r\n        text-align: center;\r\n        width: 100%;\r\n        transition: all .3s ease;\r\n    }\r\n    & label:hover div {\r\n        color: rgba(255, 255, 255, .7);\r\n\r\n    }\r\n`\r\n\r\nexport const RightContent = styled.div`\r\n    position: relative;\r\n    height: 10px;\r\n    width: 100%;\r\n    /* background-color: black; */\r\n`\r\n\r\nexport const RightItem = styled.div`\r\n    position: relative;\r\n    height: 100px;\r\n    width: 100%;\r\n    /* background-color: black; */\r\n    /* border: 1px solid black; */\r\n    margin: 20px auto;\r\n\r\n    & .title {\r\n        margin: 10px 0px;\r\n        font-size: 27px;\r\n        color: #6f9fc7;\r\n        cursor: pointer;\r\n        transition: all .3s ease;\r\n        text-align: center;\r\n    }\r\n    & .title:hover {\r\n        color: skyblue;\r\n    }\r\n\r\n    & .article-config {\r\n        height: 20px;\r\n        width: 100%;\r\n        /* background-color: black; */\r\n        font-size: 10px;\r\n        text-align: center;\r\n        font-weight: 600;\r\n\r\n\r\n        & span {\r\n            background-color: #4fc08d;\r\n            font-weight: 600;\r\n            font-size: 9px;\r\n            color: whitesmoke;\r\n            margin: 0px 5px;\r\n            display: inline-block;\r\n        }\r\n    }\r\n    \r\n`","/**\r\n * @description 首页左侧组件(登录、写文章、退出登录)\r\n * @author Uni\r\n */\r\n\r\nimport { Button } from 'antd'\r\nimport React from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { configReq, removeToken } from '../../util/token'\r\n\r\nimport {\r\n    LeftWrapper\r\n} from './style'\r\n\r\nfunction Left(props) {\r\n\r\n    const { slide, auth, setAuth } = props\r\n\r\n    const history = useHistory()\r\n\r\n    const goToEdit = () => {\r\n        history.replace('/edit')\r\n    }\r\n\r\n    const handleUser = () => {\r\n        if (auth) {\r\n            removeToken()\r\n            configReq()\r\n            window.location.href = \"/\"\r\n            \r\n        } else {\r\n            history.replace('/sign')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <LeftWrapper className={slide ? \"slide_show\" : \"slide_hidden\"}>\r\n            <Button className=\"login-button\" onClick={handleUser}>\r\n                {\r\n                    auth ? \"退出登录\" : \"去登陆\"\r\n                }\r\n            </Button>\r\n            <div className=\"edit-button\" onClick={goToEdit}>写文章</div>\r\n        </LeftWrapper>\r\n    )\r\n}\r\n\r\nexport default Left","/**\r\n * @description 封装头像上传方法\r\n * @author Uni\r\n */\r\n\r\nimport { message } from \"antd\"\r\n\r\nimport {  checkToken, upLoadImg } from \"../service\"\r\n\r\nexport const handlePostImg = async (e) => {\r\n    const auth = await checkToken()\r\n    console.log(auth)\r\n    \r\n    if (auth.code === 1) {\r\n        return message.warning(auth.data.msg)\r\n    }\r\n    const files = e.target.files\r\n    console.log(files)\r\n    console.log(files[0])\r\n\r\n    const formData = new FormData()\r\n    formData.append('upImg', files[0])\r\n    console.log(formData.get('upImg'))\r\n    const res =  await upLoadImg(formData)\r\n    if (res.code === 0) {\r\n        message.success(res.msg, .5, () => {\r\n            window.location.href = '/'\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","/**\r\n * @description 首页右侧组件（头像，所有文章展示）\r\n * @author Uni\r\n */\r\n\r\nimport { message } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { getArticle } from '../../service'\r\n\r\nimport {\r\n    RightWrapper,\r\n    RightContainer,\r\n    RightAvatar,\r\n    RightContent,\r\n    RightItem,\r\n} from './style'\r\n\r\n\r\n// import image handle function\r\nimport { handlePostImg } from '../../util/postImg'\r\n\r\nfunction Right() {\r\n\r\n    const [list, setList] = useState([])\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const { code, data } = await getArticle()\r\n            if (code === 0) {\r\n                setList(data)\r\n            } \r\n            if (code === 1) {\r\n                message.error(data.msg)\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n    }, [])\r\n\r\n    const handleArticleDetail = (id) => {\r\n        history.replace('/article/'+ id)\r\n    }\r\n\r\n    return (\r\n        <RightWrapper>\r\n            <RightContainer>\r\n                <RightAvatar id=\"avatar\" >\r\n                    <label htmlFor=\"file\" className=\"avatar-shadow\">\r\n                        <div className=\"label-tip\">更换头像</div>\r\n                    </label>\r\n                    <input type=\"file\" id=\"file\"  onChange={handlePostImg}>\r\n                    </input>\r\n                </RightAvatar>\r\n\r\n                <RightContent>\r\n                    {/* <RightItem>\r\n                        <div className=\"title\">前端工程化浅析</div>\r\n                        <div className=\"article-config\">刘辰浩&nbsp;&nbsp;<span>共享</span></div>\r\n                    </RightItem> */}\r\n                    \r\n                    \r\n                    {\r\n                        list.map((item, index) => {\r\n                            return (\r\n                                <RightItem  key={index}>\r\n                                    <div className=\"title\" onClick={() => handleArticleDetail(item._id)} >{item.title}</div>\r\n                                    <div className=\"article-config\">{item.username}{item.share ? <span>共享</span>: \"\"}</div>\r\n                                </RightItem>\r\n                            )\r\n                        })\r\n                    }\r\n                </RightContent>\r\n\r\n            </RightContainer>\r\n        </RightWrapper>\r\n    )\r\n}\r\n\r\nexport default Right","/**\r\n * @description 首页组件\r\n * @author Uni\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { checkToken, getAvatar, root } from '../../service'\r\nimport { updateUserConfig } from '../../store/action'\r\nimport { configReq } from '../../util/token'\r\n\r\n// import subcomponents\r\nimport Left from './Left'\r\nimport Right from './Right'\r\n\r\nimport {\r\n    Container,\r\n    LeftButton,\r\n} from './style'\r\n\r\nfunction Article(props) {\r\n\r\n    const { storeUser } = props\r\n\r\n    const [slide, setSlide] = useState(false) \r\n    const [auth, setAuth] = useState(false)\r\n\r\n    const handleSlide = () => {\r\n        setSlide((slide) => !slide)\r\n    }\r\n\r\n    useEffect(() => {\r\n        configReq()\r\n        async function fetchData() {\r\n            const { code, data } = await checkToken()\r\n            if (code === 0) {\r\n                const username = data.username\r\n                console.log(username)\r\n                storeUser(username)\r\n                setAuth(true)\r\n                const res = await getAvatar()\r\n                \r\n                \r\n                if (res.code === 0 && res.data.url !== '') {\r\n                    console.log(res.data.url)\r\n                    const avatarDiv = document.getElementById('avatar')\r\n                    avatarDiv.style.backgroundImage = `url(${root + res.data.url})`\r\n                }\r\n            } else {\r\n                setAuth(false)\r\n            }\r\n\r\n            \r\n        }\r\n\r\n        fetchData()\r\n    }, [auth])\r\n\r\n    return (\r\n        <Container>\r\n            <LeftButton onClick={handleSlide} className={slide ? \"slide_show\" : \"slide_hidden\"}>\r\n                <div className=\"button-line\" id=\"button-top\"></div>\r\n                <div className=\"button-line\" id=\"button-middle\"></div>\r\n                <div className=\"button-line\" id=\"button-bottom\"></div>\r\n            </LeftButton>\r\n            <Left slide={slide} auth={auth} setAuth={setAuth}/>\r\n            <Right/>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst stateToDispatch = dispatch => {\r\n    return {\r\n        storeUser(username) {\r\n            const action = updateUserConfig(username)\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(null, stateToDispatch)(Article)","/**\r\n * @description 404 not found page\r\n * @author Uni\r\n */\r\n\r\nimport React from 'react'\r\n\r\nfunction NotFound() {\r\n    return (\r\n        <div>404 not found</div>\r\n    )\r\n}\r\n\r\nexport default NotFound","/**\r\n * @description 协作页面样式\r\n * @author Uni\r\n */\r\n\r\nimport styled from 'styled-components'\r\nimport avatar from '../../static/avatar.jpg'\r\nconsole.log(avatar)\r\nexport const EditWrapper = styled.div`\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    /* background-color: black; */\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n    min-width: 1000px;\r\n`\r\n// Header 组件样式\r\nexport const EditHeaderWrapper = styled.div`\r\n    position: relative;\r\n    height: 60px;\r\n    width: 100%;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n`\r\n\r\nexport const HeaderInputWrapper = styled.div`\r\n    height: 50px;\r\n    width: 470px;\r\n    /* background-color: yellow; */\r\n    position: absolute;\r\n    left: 50px;\r\n    /* border-bottom: 2px solid #ccc; */\r\n\r\n    & input {\r\n        position: relative;\r\n        height: 100%;\r\n        width: 100%;\r\n        border: none;\r\n        outline: none;\r\n        font-size: 30px;\r\n        &::placeholder {\r\n            color: #ccc;\r\n        }\r\n    }\r\n`\r\nexport const HeaderConfigWrapper = styled.div`\r\n    height: 50px;\r\n    width: 470px;\r\n    position: absolute;\r\n    right : 50px;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    & .back-button {\r\n        position: absolute;\r\n        right: 150px;\r\n        height: 40px;\r\n        border-radius: 5px;\r\n        margin: 0px 20px;\r\n    }\r\n\r\n    & .post-button {\r\n        position: absolute;\r\n        height: 40px;\r\n        border-radius: 5px;\r\n        margin: 0px 10px;\r\n        right: 50px;\r\n    }\r\n\r\n    & .avatar {\r\n        position: absolute;\r\n        right: 0px;\r\n        height: 40px;\r\n        width: 40px;\r\n        border-radius: 20px;\r\n        background-position: center center;\r\n        background-repeat: none;\r\n        background-image: url(${avatar});\r\n        background-size: cover;\r\n    }\r\n`\r\n\r\nexport const ShareButtonWrapper = styled.div`\r\n    position: absolute;\r\n    right: 270px;\r\n    height: 40px;\r\n    width: 150px;\r\n    /* background-color: pink; */\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n\r\n    & .button-label {\r\n        font-weight: 600;\r\n        margin: 0px 10px;\r\n    }\r\n\r\n    & .button-background {\r\n        position: relative;\r\n        height: 25px;\r\n        width: 50px;\r\n        border-radius: 12.5px;\r\n        border: 1px solid #ccc;\r\n        \r\n        display: flex;\r\n        align-items: center;\r\n        cursor: pointer;\r\n        transition: all .4s ease;\r\n    }\r\n\r\n    & .button-background_unshare {\r\n        background-color: white;\r\n        box-shadow: 0px 0px 2px rgba(0, 0, 0, .7);\r\n    }\r\n\r\n    & .button-background_share {\r\n        background-color: #FFA119;\r\n        box-shadow: 0px 0px 1px rgba(0, 0, 0, .7);\r\n    }\r\n\r\n    & .button-ball {\r\n        position: absolute;\r\n        height: 28px;\r\n        width: 28px;\r\n        border: 1px solid #ccc;\r\n        box-shadow: 3px 0px 3px rgba(0, 0, 0, .1);\r\n        border-radius: 14px;\r\n        background-color: white;\r\n        transition: all .4s ease;\r\n    }\r\n\r\n    & .button-ball_unshare {\r\n        left: -2px;   \r\n    }\r\n\r\n    & .button-ball_share {\r\n        left: 27px;   \r\n    }\r\n`\r\n\r\n\r\n\r\n\r\n// 快捷工具栏组件\r\nexport const EditToolWrapper = styled.div`\r\n    position: relative;\r\n    height: 40px;\r\n    width: 100%;\r\n    background-color: #f8f8f8;\r\n    display: flex;\r\n    align-items: center;\r\n    border-bottom: 1px solid #ccc;\r\n    & .iconfont {\r\n        margin: 0px 20px;\r\n        cursor: pointer;\r\n    }\r\n`\r\n\r\nexport const EditContentWrapper = styled.div`\r\n    position: absolute;\r\n    top: 100px;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    background: #ccc;\r\n`\r\n\r\n// 左侧编辑区容器\r\nexport const ContentLeftWrapper = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    width: 50%;\r\n    background-color: #f8f8f8;\r\n    float: left;\r\n    overflow: hidden;\r\n    transition: all .4s ease;\r\n    border-right: 2px solid #ccc;\r\n    &.handle_focus {\r\n        width: 100% !important;\r\n    }\r\n\r\n    &.handle_preview {\r\n        width: 0%;\r\n    }\r\n`\r\n\r\n// 右侧内容渲染区容器\r\nexport const ContentRightWrapper = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: white;\r\n    overflow: hidden;\r\n`\r\n\r\n\r\nexport const ContentFooter = styled.div`\r\n    position: absolute;\r\n    height: 30px;\r\n    width: 100%;\r\n    bottom: 0px;\r\n    background-color: white;\r\n    border-top: 1px solid #ddd;\r\n\r\n    /* &.footer-left {\r\n        border-right: 1px solid #ddd;\r\n    }\r\n\r\n    &.footer-right {\r\n        border-left: 1px solid #ddd;\r\n    } */\r\n\r\n    & .footer-button {\r\n        height: 100%;\r\n        width: 80px;\r\n        text-align: center;\r\n        line-height: 30px;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    & .footer-button-left {\r\n        position: absolute;\r\n        right: 10px;\r\n    }\r\n\r\n    & .footer-button-right {\r\n        position: absolute;\r\n        left: 10px;\r\n    }\r\n`\r\n\r\n// markdown edit components style\r\nexport const EditContent = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 30px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    /* background-color: pink; */\r\n    /* overflow-y: scroll; */\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    overflow-x: hidden;\r\n    padding: 10px 20px;\r\n    transition: padding .4s ease;\r\n    &.content-focus {\r\n        padding: 30px 150px;\r\n        /* text-align: center; */\r\n    }\r\n\r\n\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 7px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n        /* scrollbar-arrow-color:red; */\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    /*滚动条里面轨道*/\r\n       \r\n        /* -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2); */\r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n`\r\n\r\n// TODO: 优化，抽离出一个公共的样式组件\r\n// markdown render components style\r\nexport const EditRender = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 30px;\r\n    left: 0px;\r\n    right: 0px;\r\n    margin: auto;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    overflow-x: hidden;\r\n    padding: 10px 20px;\r\n    transition: padding .4s ease;\r\n    word-wrap: break-word;\r\n\r\n\r\n    &.content-preview {\r\n        padding: 30px 150px;\r\n        /* text-align: center; */\r\n    }\r\n\r\n    &::-webkit-scrollbar {\r\n        width: 7px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        width: 7px;\r\n        border-radius: 5px;\r\n        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.1);\r\n        background: rgba(0,0,0,0.1);\r\n\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {    \r\n        border-radius: 0;\r\n        background: #eee;\r\n    }\r\n\r\n    & blockquote {\r\n        background-color: #f3f3f3;\r\n        border-radius: 5px;\r\n        box-sizing: border-box;\r\n        padding: 20px 0px 15px 30px;\r\n        display: block;\r\n    }\r\n\r\n    & hr {\r\n        width: 100%;\r\n        height: 2px;\r\n        background-color: #f4f4f4;\r\n        border: none;\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    & .code {\r\n        background-color: yellow;\r\n    }\r\n\r\n    & .code-block {\r\n        background-color: rgba(0,0,0,0.8);\r\n        margin: auto;\r\n        width: 80%;\r\n        line-height: 40px;\r\n        padding: 20px 20px 10px 20px;\r\n        border-radius: 5px;\r\n        font-family: \"STHeiti\";\r\n        color: white;\r\n    }\r\n\r\n`\r\n","/**\r\n * @description markdown 编辑区域\r\n * @author Uni\r\n */\r\n\r\n import React, { useEffect, useRef, useState } from 'react'\r\n import { connect } from 'react-redux'\r\nimport { useParams } from 'react-router'\r\nimport { getDetails } from '../../service'\r\n \r\n \r\n // import action function\r\n import {\r\n     editUpdateAction,\r\n } from '../../store/action'\r\n \r\n // import components style\r\n import {\r\n     EditContent,\r\n } from './style'\r\n \r\n function Left(props) {\r\n     \r\n     const { setUsername } = props\r\n\r\n     const { editFocus, updateEdit, editContent } = props\r\n     const { id } = useParams()\r\n     const contentEl = useRef(null)\r\n     \r\n     useEffect(() => {\r\n        const fetchData = async () => {\r\n            const res = await getDetails(id)\r\n            console.log(res)\r\n            const { username, content } = res.data\r\n            console.log(username, content)\r\n            setUsername(username)\r\n            contentEl.current.innerText = content\r\n            updateEdit(content)\r\n        }\r\n\r\n        fetchData()\r\n     }, [])\r\n \r\n     const handleEdit = e => {\r\n         let text = contentEl.current.innerText\r\n         // console.log(contentEl.current.innerText)\r\n         // console.log(e.keyCode)\r\n         if (e.keyCode === 9) {\r\n             e.preventDefault()\r\n \r\n            \r\n \r\n             // 获取光标的range对象 event.view 是一个window对象\r\n             let range = e.view.getSelection().getRangeAt(0);\r\n             // 光标的偏移位置\r\n             let offset = range.startOffset;\r\n             // 新建一个span元素\r\n             let span = document.createElement('span');\r\n             // 四个 表示四个空格\r\n             span.innerHTML = '&nbsp;&nbsp;&nbsp;';\r\n             // 创建一个新的range对象\r\n             let newrange = document.createRange();\r\n             // 设置新的range的位置，也是插入元素的位置\r\n             newrange.setStart(range.startContainer, offset);\r\n             newrange.setEnd(range.startContainer, offset);\r\n             newrange.collapse(true);\r\n             newrange.insertNode(span);\r\n             // 去掉旧的range对象，用新的range对象替换\r\n             e.view.getSelection().removeAllRanges();\r\n             e.view.getSelection().addRange(range);\r\n             // 将光标的位置向后移动一个偏移量，放到加入的四个空格后面\r\n             range.setStart(span, 1);\r\n             range.setEnd(span, 1);\r\n             console.log(text)\r\n             \r\n         }\r\n         \r\n         // console.log(text.split('\\n'))\r\n         editContent(text)\r\n         updateEdit(text)\r\n     }   \r\n \r\n     const handleBeforeEdit = e => {\r\n         if (e.keyCode === 9) {\r\n             e.preventDefault()\r\n         }\r\n     }\r\n \r\n     return (\r\n         <EditContent contentEditable=\"true\" className={editFocus ? \"content-focus\" : ''} onKeyUp={handleEdit} onKeyDown={handleBeforeEdit}  ref={contentEl} id=\"contentEl\"> \r\n         </EditContent>\r\n     )\r\n }\r\n \r\n // TODO: 通过 redux 存储输入文本\r\n const stateToDispatch = dispatch => {\r\n     return {\r\n         updateEdit(text) {\r\n             const action = editUpdateAction(text)\r\n             dispatch(action)\r\n         }\r\n     }\r\n }\r\n \r\n \r\n export default connect(null, stateToDispatch)(Left)\r\n \r\n // {\r\n //      // TODO: 写一篇技术博客记录一下\r\n //             // 获取光标的range对象 event.view 是一个window对象\r\n //             let range = e.view.getSelection().getRangeAt(0);\r\n //             // 光标的偏移位置\r\n //             let offset = range.startOffset;\r\n //             // 新建一个span元素\r\n //             let span = document.createElement('span');\r\n //             // 四个 表示四个空格\r\n //             span.innerHTML = '&nbsp;&nbsp;&nbsp;';\r\n //             // 创建一个新的range对象\r\n //             let newrange = document.createRange();\r\n //             // 设置新的range的位置，也是插入元素的位置\r\n //             newrange.setStart(range.startContainer, offset);\r\n //             newrange.setEnd(range.startContainer, offset);\r\n //             newrange.collapse(true);\r\n //             newrange.insertNode(span);\r\n //             // 去掉旧的range对象，用新的range对象替换\r\n //             e.view.getSelection().removeAllRanges();\r\n //             e.view.getSelection().addRange(range);\r\n //             // 将光标的位置向后移动一个偏移量，放到加入的四个空格后面\r\n //             range.setStart(span, 1);\r\n //             range.setEnd(span, 1);\r\n //             console.log(text)\r\n // }\r\n \r\n ","/**\r\n * @description 右侧 HTML 渲染区域父组件\r\n * @author Uni\r\n */\r\n\r\n import React, { useEffect, useRef } from 'react'\r\n import { connect } from 'react-redux'\r\n \r\n // import style components\r\n import {\r\n     EditRender,\r\n } from './style'\r\n \r\n function Right(props) {\r\n \r\n     const { preview, content } = props\r\n \r\n     const renderEl = useRef(null)\r\n \r\n     useEffect(() => {\r\n         renderEl.current.innerHTML = content === \"\" ? null : content\r\n     })\r\n \r\n     return (\r\n         <EditRender className={preview ? 'content-preview' : ''} ref={renderEl}> \r\n             {/* {\r\n                 content === '' \r\n                 ? \r\n                 null \r\n                 :  \r\n                 content.map(item => {\r\n                     return <div>{item}</div>\r\n                 })\r\n             } */}\r\n         </EditRender>\r\n     )\r\n }\r\n \r\n const stateToProps = state => {\r\n     return {\r\n         content: state.editContent\r\n     }\r\n }\r\n \r\n \r\n export default connect(stateToProps, null)(Right)","/**\r\n * @description 错误监控\r\n * @author Uni\r\n */\r\n\r\nimport { useEffect, useState } from \"react\"\r\n\r\nfunction Admin() {\r\n    const [history, setHistory] = useState([])\r\n    const [current, setCurrent] = useState([])\r\n    useEffect(() => {\r\n        const handleWebsocket = () => {\r\n            let flag = 0\r\n            const ws = new WebSocket('ws://60.205.230.224:8080/')\r\n            ws.onopen = () => {\r\n                ws.send('open ws')\r\n                console.log('open ws')\r\n            }\r\n        \r\n            ws.onmessage = e => {\r\n                const data = e.data\r\n                // console.log(data)\r\n                if (flag === 0) {\r\n                    setHistory(JSON.parse(data))\r\n                    flag = 1\r\n                } else {\r\n                    setCurrent((current) => {\r\n                        const arr = JSON.parse(JSON.stringify(current))\r\n                        arr.push(data)\r\n                        return arr\r\n                    })\r\n                }\r\n            }\r\n        \r\n            ws.onclose = () => {\r\n                console.log('close ws')\r\n            }\r\n        }\r\n        handleWebsocket()\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div id=\"current\">\r\n                {\r\n                    current.map((item, index) => {\r\n                        return <div key={index}>{item}</div>\r\n                    })\r\n                }\r\n            </div>\r\n            \r\n            <div id=\"history\">\r\n                {\r\n                    history.map((item, index) => {\r\n                        return <div key={index}>{item}</div>\r\n                    })\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default Admin","/**\r\n * @description 采用 react-router-config 对路由进行集中管理\r\n * @author Uni\r\n */\r\n\r\nimport Edit from './modules/Edit'\r\nimport LoginAndRegister from './modules/LoginAndRegister'\r\nimport Home from './modules/Home'\r\nimport Article from './modules/Article'\r\nimport NotFound from './modules/NotFound'\r\nimport Cooperation from './modules/Cooperation'\r\nimport Admin from './modules/Admin'\r\n \r\n\r\n\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        exact: true,\r\n        component: Article\r\n    },\r\n    {\r\n        path: '/edit',\r\n        exact: true,\r\n        component: Edit\r\n    },\r\n    {\r\n        path: '/sign',\r\n        exact: true,\r\n        component: LoginAndRegister\r\n    },\r\n    {\r\n        path: '/article/:id',\r\n        exact: true,\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/cooperation/:id',\r\n        exact: true,\r\n        component: Cooperation\r\n    },\r\n    {\r\n        path: '/admin',\r\n        external: true,\r\n        component: Admin\r\n    },\r\n    {\r\n        path: '*',\r\n        component: NotFound\r\n    }\r\n]\r\n\r\n\r\nexport default routes","/**\r\n * @description 协作编辑页面\r\n * @author Uni\r\n */\r\n\r\n import React, { useEffect, useRef, useState } from 'react'\r\n\r\n import {\r\n     editUpdateAction,\r\n } from '../../store/action'\r\n \r\n \r\n import {\r\n     Button, message\r\n } from 'antd'\r\n \r\n // import style components\r\n import {\r\n     EditWrapper,\r\n     EditHeaderWrapper,\r\n     EditToolWrapper,\r\n     EditContentWrapper,\r\n     ContentLeftWrapper,\r\n     ContentRightWrapper,\r\n     ContentFooter,\r\n     HeaderInputWrapper,\r\n     HeaderConfigWrapper,\r\n } from './style'\r\n \r\n // import subcomponents\r\n import Left from './Left'\r\n import Right from './Right'\r\n\r\n \r\n \r\n // import toolbar config\r\n import { toolBarConfig, Tool} from '../../util/tool-bar'\r\n import { connect } from 'react-redux'\r\n import { configReq } from '../../util/token'\r\n import { checkToken, getAvatar, postArticle, root, upDateArticle } from '../../service'\r\n import { useHistory, useParams } from 'react-router'\r\n \r\n \r\n function Cooperation(props) {\r\n     const history = useHistory()\r\n     const { id } = useParams()\r\n     useEffect(() => {\r\n         configReq()\r\n \r\n         async function fetchData() {\r\n             const {\r\n                 code,\r\n                 msg,\r\n                 data\r\n             } = await checkToken()\r\n             // console.log(code)\r\n             if (code === 1) {\r\n                 message.warning(data.msg, 1, () => {\r\n                     history.replace('/')\r\n                 })\r\n             } else {\r\n                 const res = await getAvatar()\r\n                 if (res.data.url !== '')\r\n                    document.querySelector('.avatar').style.backgroundImage = `url(${root + res.data.url})`\r\n             }\r\n         }\r\n \r\n         fetchData()\r\n     }, [])\r\n \r\n     const { update, User } = props\r\n \r\n     const [editFocus, setEditFocus] = useState(false)\r\n     const [preview, setPreview] = useState(false)\r\n     const [areaStyle, setAreaStyle] = useState('')\r\n     const [editContent, setEditContent] = useState('')\r\n     const [tool, setTool] = useState(new Tool(editContent))\r\n     const [username, setUsername] = useState('')\r\n     const titleEl = useRef(null)\r\n \r\n     useEffect(() => {\r\n         if (preview === false && editFocus === false) {\r\n             setAreaStyle('')\r\n         }\r\n \r\n         if (preview === true) {\r\n             setAreaStyle('handle_preview')\r\n         }\r\n \r\n         if (editFocus === true) {\r\n             setAreaStyle('handle_focus')\r\n         }\r\n     }, [preview, editFocus])\r\n \r\n \r\n     const getEditContent = (text) => {\r\n         setEditContent(text)\r\n     }\r\n \r\n     useEffect(() => {\r\n         setTool(new Tool(editContent))\r\n     }, [editContent])\r\n \r\n     const handleUpDateEdit = () => {\r\n         const input = document.getElementById('contentEl')\r\n         update(input.innerHTML)\r\n     }\r\n \r\n     const handleBackArticle = () => {\r\n         history.replace('/')\r\n     }\r\n \r\n  \r\n \r\n \r\n     const handlePostArticle = async () => {\r\n   \r\n         const content = document.getElementById('contentEl').innerText\r\n         const payload = {\r\n             username, \r\n             content,\r\n             id\r\n         }\r\n         \r\n         const { code, msg, data } =  await upDateArticle(payload)\r\n         console.log(msg)\r\n         if (code === 0) {\r\n             message.success(msg, .5, () => {\r\n                 history.replace('/')\r\n             })\r\n         } else {\r\n             message.warning(data.msg)\r\n         }\r\n     }\r\n \r\n     return (\r\n         <EditWrapper>\r\n             {/* 顶部组件，挂载文章标题组件、头像组件、发布按钮组件 */}\r\n             <EditHeaderWrapper>\r\n                 {/* <HeaderInputWrapper>\r\n                     <input type=\"text\" placeholder=\"输入文章标题\" ref={titleEl}/>\r\n                 </HeaderInputWrapper> */}\r\n                 <HeaderConfigWrapper>\r\n                     \r\n                     <Button className=\"back-button\" onClick={handleBackArticle}>返回主页</Button>\r\n                     <Button type=\"primary\" className=\"post-button\" onClick={handlePostArticle}>更新文章</Button>\r\n                     <div className=\"avatar\"></div>\r\n                 </HeaderConfigWrapper>\r\n             </EditHeaderWrapper>\r\n \r\n             {/* markdown 快捷工具栏组件 */}\r\n             <EditToolWrapper>    \r\n                {\r\n                    toolBarConfig.map((item) => {\r\n                        return <div className={\"iconfont \" + item.icon} onMouseDown={tool[item.fn]} onClick={handleUpDateEdit}></div>\r\n                    })\r\n                }\r\n             </EditToolWrapper>\r\n \r\n             {/* markdown 内容区容器 */}\r\n             <EditContentWrapper>\r\n \r\n                 {/* 左侧 */}\r\n                 <ContentLeftWrapper className={ areaStyle } >\r\n \r\n                     {/* 编辑组件 */}\r\n                     <Left editFocus={editFocus} editContent={getEditContent} setUsername={setUsername}/>\r\n \r\n                     <ContentFooter className=\"footer-left\">\r\n                         <div className=\"footer-button footer-button-left\" onClick={() => setEditFocus((editFocus) => !editFocus)}>专注模式</div>\r\n                     </ContentFooter>\r\n                 </ContentLeftWrapper>\r\n \r\n                 {/* 右侧 */}\r\n                 <ContentRightWrapper>\r\n \r\n                     <Right preview={preview}/>\r\n \r\n                     <ContentFooter className=\"footer-right\">\r\n                         <div className=\"footer-button footer-button-right\" onClick={() => setPreview((preview) => !preview)}>预览模式</div>\r\n                     </ContentFooter>\r\n                 </ContentRightWrapper>\r\n \r\n             </EditContentWrapper>\r\n \r\n         </EditWrapper>\r\n     )\r\n }\r\n \r\n \r\n const stateToProps = state => {\r\n     return {\r\n         User: state.username\r\n     }\r\n }\r\n \r\n const stateToDispatch = dispatch => {\r\n     return {\r\n         update(text) {\r\n             const action = editUpdateAction(text)\r\n             dispatch(action)\r\n         }\r\n     }\r\n }\r\n \r\n export default connect(stateToProps, stateToDispatch)(Cooperation)","/**\r\n * @description 根组件, 用于挂载页面路由\r\n * @author Uni\r\n */\r\nimport React from 'react'\r\n\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nimport routes from './routes'\r\nimport { renderRoutes } from 'react-router-config'\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      {\r\n        renderRoutes(routes)\r\n      }\r\n    </Router>\r\n  )\r\n}\r\n\r\n\r\nexport default App;","/**\r\n * @description markdown 解析逻辑，采用正则表达式\r\n * @author Uni\r\n */\r\n\r\nclass Particle {\r\n    constructor(text) {\r\n        this.rules = {\r\n            isHeading: /^(#{1,6}\\s*)/,\r\n            isQuote: /^(\\>\\s+)/,\r\n            isHr: /^(\\*{3,}|-{3,})/,\r\n            isCode: /^(```)/,\r\n            isUnOrderList: /^((\\*|-){1}\\s+)/,\r\n            isOrderList: /^(\\d{1}.\\s+)/,\r\n            isCodeWord: /\\`{1}(.*?)\\`{1}/g,\r\n            isImage: /\\!\\[(.*?)\\]\\((.*?)\\)/g,\r\n            isStrong: /\\*{2}(.*?)\\*{2}/g,\r\n            isLink: /\\[(.*?)\\]\\((.*?)\\)/g,\r\n            isEm: /\\*{1}(.*?)\\*{1}/g\r\n        }\r\n        this.lines = text.split('\\n')\r\n        const tokens = this.parse()\r\n        this.htmlContent = this.tokensToHTML(tokens)\r\n    }\r\n\r\n    parse() {\r\n        const tokens = []\r\n        let cur = 0\r\n\r\n\r\n        while (this.judgeCycle(cur)) {\r\n            let line = this.lines[cur]\r\n\r\n            if (line === \"\") {\r\n                tokens.push(\"<br/>\")\r\n                cur ++\r\n                continue\r\n            }\r\n\r\n\r\n            if (this.rules.isHeading.test(line)) {\r\n                let count = 0\r\n                while (line[count] === \"#\") {\r\n                    count++\r\n                }\r\n\r\n                if (line[count] === \" \") {\r\n                    const temp = line.slice(count + 1)\r\n                    const str = `<h${count}>${temp}</h${count}>`\r\n                    tokens.push(str)\r\n                    cur ++\r\n                    continue\r\n                }\r\n                \r\n            }\r\n\r\n            if (this.rules.isQuote.test(line)) {\r\n                if (line[1] === \" \") {\r\n                    let temp = line.slice(2)\r\n                    temp = `<p>${temp}</p>`\r\n                    let nextLine = this.lines[cur + 1]\r\n                    while (this.rules.isQuote.test(nextLine)) {\r\n                        if (nextLine[1] === \" \") {\r\n                            temp += (`<p>${nextLine.slice(2)}</p>`)\r\n                            cur ++ \r\n                            nextLine = this.lines[cur + 1]\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                    tokens.push(`<blockquote>${temp}</blockquote>`)\r\n                    cur ++\r\n                    continue\r\n                }\r\n            }\r\n\r\n            if (this.rules.isHr.test(line)) {\r\n                if (line.length === 3) {\r\n                    tokens.push(\"<hr/>\")\r\n                    cur ++\r\n                    continue\r\n                }\r\n            }\r\n\r\n            if (this.rules.isCode.test(line)) {\r\n                let temp = \"<pre><code>\"\r\n                let nextLine = this.lines[cur + 1]\r\n                while (!this.rules.isCode.test(nextLine) && this.judgeCycle(cur + 1)) {\r\n                    const el = document.createElement(\"div\")\r\n                    el.innerText = nextLine\r\n                    temp += el.innerHTML + '\\n'\r\n                    cur ++\r\n                    nextLine = this.lines[cur + 1]\r\n                }\r\n                temp = `<div class=\"code-block\">${temp}</code></pre></div>`\r\n                tokens.push(temp)\r\n                cur += 2\r\n                continue\r\n            }\r\n\r\n            if (this.rules.isUnOrderList.test(line)) {\r\n                let temp = `<li>${line.slice(2)}</li>`\r\n                let nextLine = this.lines[cur + 1]\r\n                while (this.rules.isUnOrderList.test(nextLine)) {\r\n                    temp += (`<li>${nextLine.slice(2)}</li>\\n`)\r\n                    cur ++\r\n                    nextLine = this.lines[cur + 1]\r\n                }\r\n                temp = `<ul>${temp}</ul>\\n`\r\n                tokens.push(temp)\r\n                cur ++\r\n                continue\r\n            }\r\n\r\n            if (this.rules.isOrderList.test(line)) {\r\n                let temp = `<li>${line.replace(this.rules.isOrderList, \"\")}</li>`\r\n                let nextLine = this.lines[cur + 1]\r\n                while (this.rules.isOrderList.test(nextLine)) {\r\n                    temp += (`<li>${nextLine.replace(this.rules.isOrderList, \"\")}</li>\\n`)\r\n                    cur ++\r\n                    nextLine = this.lines[cur + 1]\r\n                }\r\n\r\n                temp = `<ol>${temp}</ol>`\r\n                tokens.push(temp)\r\n                cur ++\r\n                continue\r\n            }\r\n\r\n            line = this.parseInline(line)\r\n            tokens.push(`<p>${line}</p>`)\r\n            cur ++\r\n        }\r\n\r\n        return tokens\r\n    }\r\n\r\n    // TODO: 行内解析\r\n    parseInline(line) {\r\n        if (this.rules.isCodeWord.test(line)) {\r\n            line = line.replace(this.rules.isCodeWord, (res, str) => {\r\n                return `<code class=\"code\">${str}</code>`\r\n            })\r\n        }\r\n\r\n        if (this.rules.isImage.test(line)) {\r\n            line = line.replace(this.rules.isImage, (res, str1, str2) => {\r\n                return `<div><img src=${str2} alt=${str1}></div>`;\r\n            })\r\n        }\r\n\r\n        if (this.rules.isStrong.test(line)) {\r\n            line = line.replace(this.rules.isStrong, (res, str) => {\r\n                return `<b>${str}</b>`\r\n            })\r\n        }\r\n\r\n        if (this.rules.isLink.test(line)) {\r\n            line = line.replace(this.rules.isLink, (res, str1, str2) => {\r\n                return `<a href=${str2}>${str1}</a>`\r\n            })\r\n        }\r\n\r\n        if (this.rules.isEm.test(line)) {\r\n            line = line.replace(this.rules.isEm, (res, str) => {\r\n                return `<em>${str}</em>`\r\n            })\r\n        }\r\n\r\n        return line\r\n    }\r\n\r\n    judgeCycle(cur) {\r\n        const len = this.lines.length\r\n        return cur < len\r\n    }\r\n\r\n    tokensToHTML(tokens) {\r\n        // console.log(\"tokens --------\", tokens)\r\n        // console.log('html ----', typeof tokens.join(''))\r\n        return tokens.join('')\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default Particle","/**\r\n * @description reducer 逻辑\r\n * @author Uni\r\n */\r\n\r\n// import action type constant\r\nimport {\r\n    EDIT_UPDATE,\r\n    USER_CONFIG\r\n} from './actionConstant'\r\n\r\n\r\n\r\n\r\n\r\nimport Particle from '../util/markdown-particle'\r\n\r\nconst defaultState = {\r\n    editContent: '',\r\n    username: '',\r\n}\r\n\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n\r\n    if (action.type === EDIT_UPDATE) {\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        const renderValue = new Particle(action.text)\r\n        newState.editContent = renderValue.htmlContent\r\n        return newState\r\n    }\r\n    \r\n    if (action.type === USER_CONFIG) {\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        \r\n        newState.username = action.username\r\n\r\n        return newState\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nexport default reducer","/**\r\n * @description 注册 redux\r\n * @author Uni\r\n */\r\n\r\nimport { createStore } from 'redux';\r\nimport reducer from './reducer';\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n);\r\nexport default store;","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\n\r\n\r\n// import ant-design style\r\nimport 'antd/dist/antd.css'\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}